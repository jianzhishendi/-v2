import{S as U,i as V,s as w,k as h,a as I,l as m,m as b,c as M,h as u,n as v,b as g,G as E,H as N,Q as q,f as j,t as H,E as z,Z as C,ab as K,ac as B,q as D,r as O,u as F,A as S,U as G,V as L,W as P,X as Q}from"./index-18ac2d2b.js";import{Y as W}from"./runtime.esm-670b0a78.js";import{l as k}from"./localstore-babdf033.js";function X(s){let t;return{c(){t=h("i"),this.h()},l(e){t=m(e,"I",{class:!0}),b(t).forEach(u),this.h()},h(){v(t,"class","gi-times svelte-y2p41t")},m(e,n){g(e,t,n)},d(e){e&&u(t)}}}function Y(s){let t;return{c(){t=h("i"),this.h()},l(e){t=m(e,"I",{class:!0}),b(t).forEach(u),this.h()},h(){v(t,"class","gi-circle-o svelte-y2p41t")},m(e,n){g(e,t,n)},d(e){e&&u(t)}}}function Z(s){let t,e=(s[1]||(s[0]==="confirm"?s[3]("confirmButton"):s[3]("cancelButton")))+"",n;return{c(){t=h("span"),n=D(e)},l(a){t=m(a,"SPAN",{});var i=b(t);n=O(i,e),i.forEach(u)},m(a,i){g(a,t,i),E(t,n)},p(a,i){i&11&&e!==(e=(a[1]||(a[0]==="confirm"?a[3]("confirmButton"):a[3]("cancelButton")))+"")&&F(n,e)},i:S,o:S,d(a){a&&u(t)}}}function J(s){let t;const e=s[7].default,n=G(e,s,s[6],null);return{c(){n&&n.c()},l(a){n&&n.l(a)},m(a,i){n&&n.m(a,i),t=!0},p(a,i){n&&n.p&&(!t||i&64)&&L(n,e,a,a[6],t?Q(e,a[6],i,null):P(a[6]),null)},i(a){t||(j(n,a),t=!0)},o(a){H(n,a),t=!1},d(a){n&&n.d(a)}}}function R(s){let t,e,n,a,i,d,_;function y(l,o){return l[0]==="confirm"?Y:X}let f=y(s),r=f(s);const p=[J,Z],c=[];function T(l,o){return l[4]?0:1}return n=T(s),a=c[n]=p[n](s),{c(){t=h("button"),r.c(),e=I(),a.c(),this.h()},l(l){t=m(l,"BUTTON",{class:!0});var o=b(t);r.l(o),e=M(o),a.l(o),o.forEach(u),this.h()},h(){t.disabled=s[2],v(t,"class","svelte-y2p41t")},m(l,o){g(l,t,o),r.m(t,null),E(t,e),c[n].m(t,null),i=!0,d||(_=N(t,"click",q(s[5])),d=!0)},p(l,[o]){f!==(f=y(l))&&(r.d(1),r=f(l),r&&(r.c(),r.m(t,e))),a.p(l,o),(!i||o&4)&&(t.disabled=l[2])},i(l){i||(j(a),i=!0)},o(l){H(a),i=!1},d(l){l&&u(t),r.d(),c[n].d(),d=!1,_()}}}function x(s,t,e){let n;z(s,W,c=>e(3,n=c));let{$$slots:a={},$$scope:i}=t;const d=t.$$slots;let{type:_="confirm"}=t,{text:y=""}=t,{disabled:f=!1}=t;const r=C(),p=()=>r("click");return s.$$set=c=>{e(9,t=K(K({},t),B(c))),"type"in c&&e(0,_=c.type),"text"in c&&e(1,y=c.text),"disabled"in c&&e(2,f=c.disabled),"$$scope"in c&&e(6,i=c.$$scope)},t=B(t),[_,y,f,n,d,p,i,a]}class nt extends U{constructor(t){super(),V(this,t,x,R,w,{type:0,text:1,disabled:2})}}const $=async s=>{const t=new TextEncoder().encode(s),e=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(e)).map(i=>i.toString(16).padStart(2,"0")).join("")},tt=async()=>{const s=new Date().toISOString(),t=await fetch(`https://gist.githubusercontent.com/AguzzTN54/3816708e01827a5c64f4903242ede7b0/raw?date=${s}`),{hash:e}=await t.json();return e},A=async s=>{const t=await tt(),e=await $(s?.trim());return t===e},it={_set(s){const t=s.trim().split("").reverse().join("");k.set("adKey",t)},clear(){return k.set("adKey",null)},async checkLocal(){const s=k.get("adKey"),t=s?.split("").reverse().join("");try{return s?{validity:await A(t),storedKey:t,status:"ok"}:{validity:!1,storedKey:t,status:"ok"}}catch{return{validity:!1,storedKey:t,status:"offline"}}},async verify(s){try{const t=await A(s);return t&&this._set(s),{validity:t,msg:t?"success":"menu.invalidKey"}}catch{return{validity:!1,msg:"connectionFailed"}}}};export{nt as B,it as a};
