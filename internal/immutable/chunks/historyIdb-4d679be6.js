import{l as D}from"./localstore-babdf033.js";import{n as w,p as C}from"./stores-e2e154ba.js";import{_ as c}from"./preload-helper-176e53da.js";import{y as g,$ as O,F as N}from"./runtime.esm-670b0a78.js";const L=(e,t)=>{const n=e[t];return n?typeof n=="function"?n():Promise.resolve(n):new Promise((r,s)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(s.bind(null,new Error("Unknown variable dynamic import: "+t)))})},B=["zh-CN","en-US","id-ID","it-IT","ja-JP","ru-RU","th-TH","vi-VN"],S=["en-US","ja-JP","ru-RU","zh-CN","vi-VN"],T=()=>{const t=localStorage.getItem("locale")||N();return B.find(r=>r.includes(t))||"en-US"},ne=()=>{B.forEach(t=>{g(t,()=>L(Object.assign({"../../locales/en-US.json":()=>c(()=>import("./en-US-cbdb268c.js"),[],import.meta.url),"../../locales/id-ID.json":()=>c(()=>import("./id-ID-7fc76607.js"),[],import.meta.url),"../../locales/it-IT.json":()=>c(()=>import("./it-IT-3386cbba.js"),[],import.meta.url),"../../locales/ja-JP.json":()=>c(()=>import("./ja-JP-4ff36bf3.js"),[],import.meta.url),"../../locales/ru-RU.json":()=>c(()=>import("./ru-RU-e1c62a68.js"),[],import.meta.url),"../../locales/th-TH.json":()=>c(()=>import("./th-TH-24803a1d.js"),[],import.meta.url),"../../locales/vi-VN.json":()=>c(()=>import("./vi-VN-6ef73c0c.js"),[],import.meta.url),"../../locales/zh-CN.json":()=>c(()=>import("./zh-CN-46a3493c.js"),[],import.meta.url)}),`../../locales/${t}.json`))}),S.forEach(t=>{g(t,()=>L(Object.assign({"../../locales/items/en-US.json":()=>c(()=>import("./en-US-d4894950.js"),[],import.meta.url),"../../locales/items/ja-JP.json":()=>c(()=>import("./ja-JP-18154a23.js"),[],import.meta.url),"../../locales/items/ru-RU.json":()=>c(()=>import("./ru-RU-bb3146a0.js"),[],import.meta.url),"../../locales/items/vi-VN.json":()=>c(()=>import("./vi-VN-1af94719.js"),[],import.meta.url),"../../locales/items/zh-CN.json":()=>c(()=>import("./zh-CN-106b8f89.js"),[],import.meta.url)}),`../../locales/items/${t}.json`))});const e=T();O({fallbackLocale:"en-US",initialLocale:e})},P=()=>D.get("notice")||[],V=(e=[])=>D.set("notice",e),re={openNotice(e){const t=P();t.includes(e)||(t.push(e),V(t),w.set(t))},onLoadCheck(){const e=P();w.set(e)}},b=[{country:["br"],currency:"BRL",symbol:"R$",format:"{symbol}{nominal}",list:{welkin:27.9,genesis:{60:4.9,300:27.9,980:84.9,1980:169.9,3280:279.9,6480:549.9}}},{country:["cn"],currency:"CNY",symbol:"\xA5",format:"{symbol}{nominal}",list:{welkin:30,genesis:{60:6,300:30,980:98,1980:198,3280:328,6480:648}}},{country:["ad","at","be","cy","gr","es","fr","de","fi","it","pt","nl"],currency:"EUR",symbol:"\u20AC",format:"{symbol}{nominal}",list:{welkin:4.49,genesis:{60:.99,300:4.49,980:14.99,1980:29.99,3280:49.99,6480:99.99}}},{country:["uk"],currency:"GBP",symbol:"\xA3",format:"{symbol}{nominal}",list:{welkin:4.49,genesis:{60:.89,300:4.49,980:12.99,1980:25.99,3280:44.99,6480:89.99}}},{country:["id"],currency:"IDR",symbol:"IDR",format:"{symbol} {nominal}",list:{welkin:75e3,genesis:{60:15e3,300:75e3,980:219e3,1980:439e3,3280:739e3,6480:1499e3}}},{country:["ja"],currency:"JPY",symbol:"\xA5",format:"{symbol}{nominal}",list:{welkin:610,genesis:{60:120,300:610,980:1840,1980:3680,3280:6100,6480:12e3}}},{country:["ko"],currency:"KRW",symbol:"\u20A9",format:"{symbol}{nominal}",list:{welkin:5900,genesis:{60:1200,300:5900,980:19e3,1980:37e3,3280:65e3,6480:119e3}}},{country:["ph"],currency:"PHP",symbol:"\u20B1",format:"{symbol}{nominal}",list:{welkin:249,genesis:{60:49,300:249,980:749,1980:1490,3280:2490,6480:4990}}},{country:["ru"],currency:"RUB",symbol:"\u20BD",format:"{nominal}{symbol}",list:{welkin:499,genesis:{60:99,300:499,980:1390,1980:2790,3280:4690,6480:9490}}},{country:["th"],currency:"THB",symbol:"\u0E3F",format:"{symbol}{nominal}",list:{welkin:179,genesis:{60:35,300:179,980:549,1980:1100,3280:1800,6480:3700}}},{country:["us"],currency:"USD",symbol:"US$",format:"{symbol}{nominal}",list:{welkin:4.99,genesis:{60:.99,300:4.99,980:14.99,1980:29.99,3280:49.99,6480:99.99}}},{country:["vn"],currency:"VND",symbol:"\u0111",format:"{nominal}{symbol}",list:{welkin:109e3,genesis:{60:22e3,300:109e3,980:329e3,1980:699e3,3280:1099e3,6480:2199e3}}}],oe=b.map(({symbol:e,currency:t})=>({symbol:e,currency:t})),U=e=>e.replace(/\B(?=(\d{3})+(?!\d))/g,","),se={init(e=null){const{symbol:t,list:n,format:r}=this.checkUsedCurrency(e);this._symbol=t,this._list=n,this._format=r;const{welkin:s,genesis:i}=n,o={genesis:{}};o.welkin=this.formatPrice(s),Object.keys(i).forEach(m=>{o.genesis[m]=this.formatPrice(i[m])}),C.set(o)},checkUsedCurrency(e){const t=e||D.get("currency")||T();return b.find(({country:r,currency:s})=>{const i=t===s,o=r.find(l=>t.toLocaleLowerCase().includes(l));return i||t.length<6&&o})||b.find(({currency:r})=>r==="USD")},formatPrice(e){const t=e.toFixed(2).toString(),n=U(t);return this._format.replace("{symbol}",this._symbol).replace("{nominal}",n)},getTotalSpend(e){const t=this._list.genesis[60]/60,n=e*160*t;return this.formatPrice(n)}},M=(e,t)=>t.some(n=>e instanceof n);let v,j;function x(){return v||(v=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function F(){return j||(j=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const A=new WeakMap,h=new WeakMap,R=new WeakMap,f=new WeakMap,E=new WeakMap;function H(e){const t=new Promise((n,r)=>{const s=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{n(d(e.result)),s()},o=()=>{r(e.error),s()};e.addEventListener("success",i),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&A.set(n,e)}).catch(()=>{}),E.set(t,e),t}function W(e){if(h.has(e))return;const t=new Promise((n,r)=>{const s=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),s()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)});h.set(e,t)}let I={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return h.get(e);if(t==="objectStoreNames")return e.objectStoreNames||R.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return d(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function $(e){I=e(I)}function J(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(_(this),t,...n);return R.set(r,t.sort?t.sort():[t]),d(r)}:F().includes(e)?function(...t){return e.apply(_(this),t),d(A.get(this))}:function(...t){return d(e.apply(_(this),t))}}function K(e){return typeof e=="function"?J(e):(e instanceof IDBTransaction&&W(e),M(e,x())?new Proxy(e,I):e)}function d(e){if(e instanceof IDBRequest)return H(e);if(f.has(e))return f.get(e);const t=K(e);return t!==e&&(f.set(e,t),E.set(t,e)),t}const _=e=>E.get(e);function z(e,t,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(e,t),m=d(o);return r&&o.addEventListener("upgradeneeded",l=>{r(d(o.result),l.oldVersion,l.newVersion,d(o.transaction))}),n&&o.addEventListener("blocked",()=>n()),m.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",()=>s())}).catch(()=>{}),m}const Y=["get","getKey","getAll","getAllKeys","count"],q=["put","add","delete","clear"],p=new Map;function k(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(p.get(t))return p.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=q.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Y.includes(n)))return;const i=async function(o,...m){const l=this.transaction(o,s?"readwrite":"readonly");let y=l.store;return r&&(y=y.index(m.shift())),(await Promise.all([y[n](...m),s&&l.done]))[0]};return p.set(t,i),i}$(e=>({...e,get:(t,n,r)=>k(t,n)||e.get(t,n,r),has:(t,n)=>!!k(t,n)||e.has(t,n)}));const G=1,Q="WishSimulator",a="history";let u;u=z(Q,G,{upgrade(e){const t=e.createObjectStore(a,{keyPath:"id",autoIncrement:!0});t.createIndex("banner","banner",{unique:!1}),t.createIndex("name","name",{unique:!1})}});const ie={async historyCount(){return(await u).count(a)},async getList(e){return(await u).getAllFromIndex(a,"banner",e)},async countItem(e){return(await u).countFromIndex(a,"name",e)},async getByName(e){return(await u).getAllFromIndex(a,"name",e)},async resetHistory(e){try{const t=await u;return(await t.getAllKeysFromIndex(a,"banner",e)).forEach(r=>t.delete(a,r)),"success"}catch{return"failed"}},async clearIDB(){return(await u).clear(a)},async getAllHistories(){return(await u).getAll(a)},async addHistory(e){if(!!e.hasOwnProperty("banner"))return(await u).put(a,e)},async delete(e){if(!!e)return(await u).delete(a,e)}};export{ie as H,L as _,oe as a,ne as m,re as n,se as u};
